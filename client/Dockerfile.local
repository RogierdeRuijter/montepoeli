# FROM node:13-slim make this work
FROM node:13

RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

RUN yarn global add @angular/cli

COPY package.json package.json
COPY ngsw-config.json ngsw-config.json
RUN cd /usr/src/app/ && yarn install --ignore-optional

RUN yarn compile-ivy-dependencies

ADD . /usr/src/app

EXPOSE 4200
EXPOSE 49153
